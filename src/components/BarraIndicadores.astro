---
/**
 * Componente BarraIndicadores
 * Muestra una barra con los valores actuales de UF y UTM
 * Ideal para incluir en el Header o Footer
 */
import { getIndicadores, fmt, fmtFecha } from "@/utils/indicadores";

const indicadores = await getIndicadores();
const sourceLabel =
  indicadores.source === "live" ? "dato en línea" : "fallback controlado";
---

<div
  class="barra-indicadores flex flex-wrap justify-end gap-x-4 gap-y-1 border-b border-border px-4 py-1.5 text-xs text-foreground/50"
>
  <span>
    <span class="font-semibold text-foreground/70">UF</span>
    {" "}{fmt(indicadores.uf)}
  </span>
  <span>
    <span class="font-semibold text-foreground/70">UTM</span>
    {" "}{fmt(indicadores.utm)}
  </span>
  <span class="text-foreground/30">
    Actualizado: {fmtFecha(indicadores.fecha)} · Fuente: {sourceLabel}
  </span>
  {
    indicadores.source === "fallback" && (
      <span class="rounded-full bg-yellow-500/20 px-2 py-0.5 font-semibold text-yellow-500">
        Modo fallback
      </span>
    )
  }
</div>
